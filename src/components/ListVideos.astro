---
import { getI18N } from "../i18n/index";
import videos from "../data/videos.json";
---

<!-- listVideos.astro -->
<script>
  function loadVideo(url: string) {
    const iframe = document.getElementById("videoFrame") as HTMLIFrameElement;
    if (iframe) {
      iframe.src = `https://www.youtube.com/embed/${url}`;
    } else {
      console.error("No se encontrÃ³ el elemento con ID 'videoFrame'");
    }
  }

  interface Video {
    urlVideo: string;
  }

  function handleImageClick(video: Video) {
    loadVideo(video.urlVideo);
  }

  document.addEventListener("DOMContentLoaded", () => {
    const images = document.querySelectorAll(".video-thumbnail");
    images.forEach((image) => {
      image.addEventListener("click", () => {
        const videoUrl = image.getAttribute("data-video-url");
        handleImageClick({ urlVideo: videoUrl as string });
      });
    });
  });
</script>

<section>
  <div class="flex justify-center">
    <div class="xl:max-w-[1000px] md:max-w-[800px] w-full">
      <div class="relative h-0" style={{ paddingBottom: "56.25%" }}>
        <iframe
          id="videoFrame"
          class="absolute left-0 top-0 h-full w-full rounded-lg shadow-2xl shadow-white/10"
          src={`https://www.youtube.com/embed/${videos[0].urlVideo}`}
          frameborder="0"
          data-allow="autoplay; encrypted-media"
          allowfullscreen></iframe>
      </div>
    </div>
  </div>
  <div class="flex justify-center">
    <div
      class="overflow-x-auto w-full flex justify-center whitespace-nowrap mt-10"
    >
      <div class="inline-block min-w-screen">
        <div class="flex gap-4">
          {
            videos.map((video) => (
              <>
                <img
                  data-video-url={video.urlVideo}
                  src={video.urlMiniature}
                  alt="Image 1"
                  class="sm:w-1/3 w-1/2 lg:w-1/4 xl:w-1/5 video-thumbnail hover:cursor-pointer rounded-xl mb-4"
                />
              </>
            ))
          }
        </div>
      </div>
    </div>
  </div>
</section>
